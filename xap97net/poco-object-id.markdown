---
layout: post97
title:  Space Object ID
categories: XAP97NET
parent: modeling-your-data.html
weight: 100
---

{% summary %} {% endsummary %}

# How Space Object ID is Generated?

You can insert an object into the space using the `Write()` and `WriteMultiple()` methods. When a new object is inserted into the space, it embeds a unique ID - called the UID. The UID can be generated explicitly by the client using a unique value generated by the application business logic or using a sequencer running within the space.

The space UID for space object can be created in three different ways:

- When a space object has no `SpaceId` property declared, the space generates a UID for the object.
- When a space object has a property which is declared as `SpaceId` and marked as `auto-generate=false`, the UID is generated based on the value of the ID field the user is setting.
- When a space object has a property which is declared as `SpaceId` and marked as `auto-generate=true`, the UID is generated by the space and placed back into the field using the relevant setter method. In this case, the field must be a `String` type.




# The SpaceId Field content

- When a space Class has no `SpaceId` property declared, it will be returned without any ID. This means that **update operations cannot be executed** on the space Class. Only the `Read()` and `Write()` methods can be executed.
- When a space Class has a property which is declared as `SpaceId` and `auto-generate=true` and its value is `null`, the `SpaceId` field will store the ID.
- When a space Class has a property which is declared as `SpaceId` and `auto-generate=true` and its value is not null, the `SpaceId` field will store the original value stored within the `SpaceId` field.
- When a space Class has a property which is declared as `SpaceId` and `auto-generate=false`, the `SpaceId` field will store the original value stored within the `SpaceId` field used to generate the UID.

{%comment%}

# Compound SpaceId

You might need to construct an ID that will be comprised from a user defined Object rather than using a Numeric or String type field. In such a case your user defined class used as the `SpaceId` data type must implement the `ToString` , `GetHashCode` and `Equals` methods.

{% note %} The compound ID class must implement a `ToString` method that return a unique String for each ID. {%endnote%}

See below example:

{% inittab The CompoundId|top %}
{% tabcontent The CompoundId %}

{% highlight csharp %}

[Serializable]
public class CompoundId
{
	public String Key1 { set; get; }
	public String Key2 { set; get; }
	public String Key3 { set; get; }

	public override String ToString ()
	{
		return Key1 + "_" + Key2 + "_" + Key3;
	}

	public override int GetHashCode ()
	{
		int prime = 31;
		int result = 1;
		result = prime * result + ((Key1 == null) ? 0 : Key1.GetHashCode ());
		result = prime * result + ((Key2 == null) ? 0 : Key2.GetHashCode ());
		result = prime * result + ((Key3 == null) ? 0 : Key3.GetHashCode ());
		return result;
	}

	public override bool Equals (Object obj)
	{
		if (this == obj)
			return true;
		if (obj == null)
			return false;
		if (this.GetType () != obj.GetType ())
			return false;

		CompoundId other = obj as CompoundId;

		if (Key1 == null) {
			if (other.Key1 != null)
				return false;
		} else if (!Key1.Equals (other.Key1))
			return false;
		if (Key2 == null) {
			if (other.Key2 != null)
				return false;
		} else if (!Key2.Equals (other.Key2))
			return false;
		if (Key3 == null) {
			if (other.Key3 != null)
				return false;
		} else if (!Key3.Equals (other.Key3))
			return false;
		return true;
	}
}
{% endhighlight %}

{% endtabcontent %}

{% tabcontent The Space Class %}

{% highlight csharp %}
[SpaceClass]
public class MySpaceClass {
	[SpaceID(AutoGenerate = false)]
	public CompoundId Id {set; get;}
	public String Data {set; get;}


	public override String ToString() {
		return "ID:" + Id + " Data:"+ Data;
	}
}
{% endhighlight %}

{% endtabcontent %}
{% tabcontent The Application Code %}

{% highlight csharp %}
ISpaceProxy spaceProxy = GigaSpacesFactory.FindSpace(url);

    CompoundId id = new CompoundId();
    id.Key1="1";
    id.Key2="2";
    id.Key3="3";

    MySpaceClass obj = new MySpaceClass();
    obj.Data="AAAAAAAAA";
    obj.Id=id;

    space.Write(obj);

    MySpaceClass ret = space.ReadById<MySpaceClass>(id);
{% endhighlight %}

{% endtabcontent %}
{% endinittab %}

{%endcomment%}